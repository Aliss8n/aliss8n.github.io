<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Feliz Anivers√°rio, Gabriela! üíñ</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#070B14;
      --bg2:#101B3A;
      --pink:#ff4d7d;
      --pink2:#ff6fa0;
      --white:#f7f7ff;
      --muted:#b7c3ff;
      --card:#0b1230cc;
      --stroke:#00000055;
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --glow: 0 0 18px rgba(255,77,125,.45), 0 0 42px rgba(255,77,125,.25);
    }

    *{ box-sizing:border-box; }
    html, body { height:100%; margin:0; }
    body{
      font-family: "Press Start 2P", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--white);
      overflow:hidden;
      background:
        radial-gradient(1100px 700px at 70% 10%, rgba(255,77,125,.14), transparent 65%),
        radial-gradient(900px 600px at 20% 80%, rgba(140,170,255,.10), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
    }

    .grid::before{
      content:"";
      position:absolute; inset:0;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.035) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.035) 1px, transparent 1px);
      background-size: 22px 22px;
      pointer-events:none;
      mix-blend-mode: soft-light;
      opacity:.35;
    }

    .stars, .stars2{
      position:absolute; inset:-20%;
      background-repeat: repeat;
      background-size: 280px 280px;
      pointer-events:none;
      opacity:.55;
      filter: drop-shadow(0 0 2px rgba(255,255,255,.25));
      animation: drift 28s linear infinite;
    }
    .stars{
      background-image:
        radial-gradient(2px 2px at 12px 18px, rgba(255,255,255,.8), transparent 60%),
        radial-gradient(1.5px 1.5px at 70px 55px, rgba(255,255,255,.65), transparent 60%),
        radial-gradient(1.5px 1.5px at 180px 210px, rgba(255,255,255,.7), transparent 60%),
        radial-gradient(2px 2px at 220px 120px, rgba(255,255,255,.55), transparent 60%),
        radial-gradient(1px 1px at 250px 40px, rgba(255,255,255,.6), transparent 60%);
    }
    .stars2{
      opacity:.35;
      background-size: 360px 360px;
      animation-duration: 42s;
      background-image:
        radial-gradient(2px 2px at 40px 80px, rgba(255,255,255,.5), transparent 60%),
        radial-gradient(1px 1px at 130px 160px, rgba(255,255,255,.45), transparent 60%),
        radial-gradient(1.5px 1.5px at 310px 90px, rgba(255,255,255,.4), transparent 60%),
        radial-gradient(1px 1px at 260px 260px, rgba(255,255,255,.35), transparent 60%);
    }
    @keyframes drift{
      from{ transform: translate3d(0,0,0); }
      to{ transform: translate3d(8%, 6%, 0); }
    }

    .wrap{
      position:relative;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px;
    }

    .stage{
      position:relative;
      width:min(980px, 95vw);
      height:min(640px, 85vh);
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }

    .content{
      position:absolute; inset:0;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap: 18px;
      padding: 34px 18px 18px;
      text-align:center;
      z-index:2;
    }

    .title{
      line-height:1.35;
      text-shadow: 0 2px 0 var(--stroke);
      max-width: 90%;
    }

    .title .name{
      color: var(--pink2);
      text-shadow: 0 2px 0 var(--stroke), var(--glow);
    }

    .hint{
      font-family: inherit;
      font-size: 9px;
      color: var(--muted);
      opacity: .9;
      max-width: 680px;
      line-height:1.7;
      padding: 0 12px;
    }

    .heart-wrap{
      position:relative;
      display:grid;
      place-items:center;
      margin-top: 6px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.35));
    }

    .heart{
      --pixel: 14px;
      width: calc(var(--pixel) * 16);
      height: calc(var(--pixel) * 14);
      display:grid;
      grid-template-columns: repeat(16, var(--pixel));
      grid-template-rows: repeat(14, var(--pixel));
      gap: 0;
      transform-origin:center;
      animation: beat 1.05s infinite ease-in-out;
      image-rendering: pixelated;
      will-change: transform, filter;
      cursor: pointer;
    }

    .px{
      width: var(--pixel);
      height: var(--pixel);
      background: transparent;
    }
    .px.on{
      background: linear-gradient(180deg, rgba(255,77,125,1), rgba(255,77,125,.72));
      box-shadow: inset 0 -2px 0 rgba(0,0,0,.22);
    }

    @keyframes beat{
      0%, 100% { transform: scale(1); }
      12% { transform: scale(1.08); }
      25% { transform: scale(1.02); }
      45% { transform: scale(1.10); }
      65% { transform: scale(1.00); }
    }

    /* message panel */
    .panel{
      position:absolute;
      left: 50%;
      top: 60%;
      transform: translate(-50%, -50%);
      width: min(760px, 92%);
      background: var(--card);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 18px 16px;
      z-index:5;
      display:none;
      backdrop-filter: blur(10px);
      cursor: pointer;
    }
    .panel.show{ display:block; animation: pop .18s ease-out; }
    @keyframes pop{
      from{ transform: translate(-50%, -48%) scale(.98); opacity: .3; }
      to{ transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }

    .panel h2{
      margin: 0 0 10px;
      font-size: 12px;
      line-height:1.4;
      color: var(--pink2);
      text-shadow: 0 2px 0 var(--stroke);
    }
    .panel p{
      margin: 0;
      font-size: 9px;
      line-height: 1.9;
      color: var(--white);
      opacity: .96;
      text-shadow: 0 2px 0 rgba(0,0,0,.22);
    }
    .panel .mini{
      margin-top: 12px;
      font-size: 8px;
      color: rgba(255,255,255,.7);
      line-height:1.6;
    }

    /* confetti canvas */
    canvas{
      position:absolute;
      inset:0;
      z-index:3;
      pointer-events:none;
    }

    /* burst: pixels fly outward */
    .burst .px.on{
      animation: fly 720ms ease-out forwards;
    }
    @keyframes fly{
      0%{ transform: translate(0,0) scale(1); opacity: 1; }
      100%{ transform: translate(var(--dx), var(--dy)) scale(.1); opacity: 0; }
    }

    @media (max-width: 520px){
      .heart{ --pixel: 12px; }
    }
  </style>
</head>

<body>
  <div class="grid"></div>
  <div class="stars"></div>
  <div class="stars2"></div>

  <div class="wrap">
    <div class="stage" role="application" aria-label="Cart√£o de anivers√°rio interativo">
      <canvas id="confetti"></canvas>

      <div class="content">
        <div class="title" aria-label="Feliz anivers√°rio">
          FELIZ ANIVERS√ÅRIO, <span class="name">GABRIELA</span>!
        </div>

        <div class="heart-wrap">
          <div id="heart" class="heart" aria-label="Cora√ß√£o em pixel art batendo (clique)"></div>
        </div>

        <div class="hint">
          Clique no cora√ß√£o üíó
        </div>
      </div>

      <div class="panel" id="panel" aria-label="Mensagem de anivers√°rio (clique para fechar)">
        <h2>Pra voc√™, Gabriela üíñ</h2>
        <p id="panelText">
          Que seu novo ano venha com leveza, sa√∫de e paz. Que voc√™ se orgulhe do caminho que j√° trilhou
          e se anime com tudo o que ainda vai viver. Obrigado por ser casa, por ser riso, por ser abra√ßo.
          Te amo hoje e sempre. ‚ú®
        </p>
        <div class="mini">Clique em qualquer lugar deste cart√£o para fechar.</div>
      </div>
    </div>
  </div>

  <script>
    // --- Pixel heart pattern (16x14). 1 = pixel on, 0 = off
    const HEART = [
      "0001100000011000",
      "0011110000111100",
      "0111111001111110",
      "1111111111111111",
      "1111111111111111",
      "1111111111111111",
      "0111111111111110",
      "0011111111111100",
      "0001111111111000",
      "0000111111110000",
      "0000011111100000",
      "0000001111000000",
      "0000000110000000",
      "0000000000000000",
    ];

    const heartEl = document.getElementById("heart");
    const panel = document.getElementById("panel");
    const panelText = document.getElementById("panelText");

    // Messages rotation (opens when you click the heart)
    const MESSAGES = [
      "Que seu novo ano venha com leveza, sa√∫de e paz. Que voc√™ se orgulhe do caminho que j√° trilhou e se anime com tudo o que ainda vai viver. Obrigado por ser casa, por ser riso, por ser abra√ßo. Te amo hoje e sempre. ‚ú®",
      "Gabriela, voc√™ √© aquele tipo de pessoa que melhora o dia s√≥ de existir. Que hoje seja cheio de carinho e que o resto do ano te devolva em dobro tudo de bom que voc√™ espalha. üíó",
      "Que cada sonho seu encontre um jeito bonito de acontecer. E que, nos dias dif√≠ceis, voc√™ lembre: voc√™ √© forte, especial e muito amada. Feliz anivers√°rio! üéÇ‚ú®",
      "Se eu pudesse escolher de novo, escolheria voc√™ de novo. Obrigado por caminhar comigo. Feliz anivers√°rio, meu amor. üíñ"
    ];
    let msgIndex = 0;

    // Build pixel heart
    function buildHeart() {
      heartEl.innerHTML = "";
      for (let y = 0; y < HEART.length; y++) {
        const row = HEART[y];
        for (let x = 0; x < row.length; x++) {
          const px = document.createElement("div");
          px.className = "px";
          if (row[x] === "1") px.classList.add("on");
          heartEl.appendChild(px);
        }
      }
    }

    // Randomize burst vectors for "open heart" effect
    function applyBurstVectors() {
      const rect = heartEl.getBoundingClientRect();
      const cx = rect.width / 2;
      const cy = rect.height / 2;
      const pixels = [...heartEl.querySelectorAll(".px.on")];

      pixels.forEach((p) => {
        const pr = p.getBoundingClientRect();
        const px = (pr.left - rect.left) + pr.width / 2;
        const py = (pr.top - rect.top) + pr.height / 2;

        const vx = (px - cx) / cx;
        const vy = (py - cy) / cy;

        const dist = 40 + Math.random() * 90;
        const dx = (vx * dist) + (Math.random() * 18 - 9);
        const dy = (vy * dist) + (Math.random() * 18 - 9);

        p.style.setProperty("--dx", dx.toFixed(1) + "px");
        p.style.setProperty("--dy", dy.toFixed(1) + "px");
        p.style.animationDelay = (Math.random() * 120) + "ms";
      });
    }

    // Confetti
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    let confetti = [];
    let raf = null;

    function resize() {
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      canvas.width = Math.floor(canvas.clientWidth * dpr);
      canvas.height = Math.floor(canvas.clientHeight * dpr);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener("resize", resize);

    function spawnConfetti(count = 160) {
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;
      for (let i = 0; i < count; i++) {
        confetti.push({
          x: Math.random() * w,
          y: -20 - Math.random() * h * 0.4,
          vx: (Math.random() - 0.5) * 1.6,
          vy: 1.5 + Math.random() * 2.8,
          size: 3 + Math.random() * 6,
          rot: Math.random() * Math.PI,
          vr: (Math.random() - 0.5) * 0.18,
          a: 0.55 + Math.random() * 0.35
        });
      }
    }

    function tick() {
      const w = canvas.clientWidth;
      const h = canvas.clientHeight;

      ctx.clearRect(0, 0, w, h);

      for (const p of confetti) {
        p.x += p.vx;
        p.y += p.vy;
        p.rot += p.vr;

        if (p.y > h + 30) {
          p.y = -20;
          p.x = Math.random() * w;
        }

        ctx.save();
        ctx.globalAlpha = p.a;
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot);
        const hue = (Math.random() < 0.5) ? 330 : 210;
        ctx.fillStyle = `hsla(${hue}, 90%, 70%, ${p.a})`;
        ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
        ctx.restore();
      }

      raf = requestAnimationFrame(tick);
    }

    // Panel controls
    function openPanel() {
      panel.classList.add("show");
    }
    function closePanel() {
      panel.classList.remove("show");
    }

    // Heart action: burst + confetti + message
    let animating = false;
    function heartAction() {
      if (animating) return;
      animating = true;

      // update message each click
      msgIndex = (msgIndex + 1) % MESSAGES.length;
      panelText.textContent = MESSAGES[msgIndex];

      // burst animation
      applyBurstVectors();
      heartEl.classList.add("burst");

      // confetti
      spawnConfetti(220);

      // show message panel
      openPanel();

      // reset burst by rebuilding heart
      setTimeout(() => {
        buildHeart();
        animating = false;
      }, 820);
    }

    heartEl.addEventListener("click", heartAction);
    panel.addEventListener("click", closePanel);

    // init
    buildHeart();
    resize();
    spawnConfetti(90);
    tick();
  </script>
</body>
</html>
